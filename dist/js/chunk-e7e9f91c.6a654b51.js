(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e7e9f91c"],{3412:function(t,e,o){"use strict";o("fb99")},"89fb":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"SubMit"},[o("div",{staticClass:"back"}),o("van-tabs",{attrs:{"title-inactive-color":"#e93323",background:"#e49e97"},on:{disabled:t.disabled}},[o("van-tab",{attrs:{title:"快速派送"}}),o("van-tab",{attrs:{disabled:"",title:"到店自取"}})],1),o("van-cell",{staticClass:"lxr",on:{click:t.onEdit}},[o("div",[t._v(" "+t._s(t.currentContact.name)+" "),o("span",[t._v(t._s(t.currentContact.tel))])]),o("div",[t._v(" "+t._s(t.addressInfoa.province)+t._s(t.addressInfoa.city)+t._s(t.addressInfoa.district)+t._s(t.addressInfoa.detail)+" ")])]),o("van-popup",{staticClass:"dz_popup",attrs:{closeable:"",position:"bottom"},on:{open:t.popup},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[o("van-cell",{staticClass:"pop_top",attrs:{value:"选择地址"}}),o("div",{staticClass:"pop_con"},t._l(t.popuplist,(function(e){return o("van-cell",{key:e.id,on:{click:t.onEdit}},[o("div",[t._v(" "+t._s(e.real_name)+" "),o("span",[t._v(t._s(e.phone))])]),o("div",[t._v(t._s(e.province)+t._s(e.city)+t._s(e.district)+t._s(e.detail))])])})),1),o("div",{staticClass:"pop_bto"},[o("van-button",{attrs:{color:"rgb(244,73,57)",round:"",type:"info"}},[t._v("添加地址")])],1)],1),o("van-cell",{attrs:{value:"共0件商品"}}),o("div",{staticClass:"card"},t._l(t.cartInfo,(function(t){return o("van-card",{key:t.id,attrs:{num:t.cart_num,price:t.truePrice,desc:t.productInfo.attrInfo.suk,title:t.productInfo.store_name,thumb:t.productInfo.image}})})),1),o("van-coupon-cell",{on:{click:function(e){t.showList=!0}}}),o("van-popup",{style:{height:"30%"},attrs:{closeable:"",position:"bottom"},model:{value:t.showList,callback:function(e){t.showList=e},expression:"showList"}},[o("p",[t._v("优惠卷")])]),o("van-cell-group",[o("van-cell",{attrs:{title:"积分折扣",value:"当前折扣："},scopedSlots:t._u([{key:"right-icon",fn:function(){return[o("p",{staticClass:"cell_p"},[t._v(t._s(t.userInfo.integral))]),o("van-checkbox",{on:{click:t.checkbox},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})]},proxy:!0}])})],1),o("van-cell-group",[o("van-cell",{attrs:{title:"会员优惠"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[o("p",[t._v(t._s(0==t.vipPrice?"无":"-￥"+t.vipPrice))])]},proxy:!0}])})],1),o("van-cell-group",[o("van-cell",{attrs:{title:"快递邮费"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[o("p",[t._v(t._s(0==t.storePostage?"免邮费":t.storePostage))])]},proxy:!0}])})],1),o("van-cell-group",{staticClass:"cell-group"},[o("van-cell",{attrs:{title:"备注信息"}}),o("van-field",{attrs:{rows:"2",autosize:"",type:"textarea",placeholder:"请输入","show-word-limit":""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),o("van-cell-group",{staticClass:"cell-group-zf"},[o("van-cell",{attrs:{title:"支付方式"}}),o("div",{staticClass:"group-zf"},[o("van-cell",{class:{cell_zf:1==t.cell},attrs:{title:"微信支付",value:"微信快捷支付"},on:{click:t.cell1}}),o("van-cell",{class:{cell_zf:2==t.cell},attrs:{title:"余额支付",value:"可用余额："+t.userInfo.now_money},on:{click:t.cell2}})],1)],1),o("van-submit-bar",{attrs:{price:t.price_z,"button-text":"立即结算"},on:{submit:t.onSubmit}}),o("van-popup",{staticClass:"popup",model:{value:t.showpopup,callback:function(e){t.showpopup=e},expression:"showpopup"}},[o("van-loading"),t._v("订单生成中")],1)],1)},a=[],n=(o("b0c0"),{data:function(){return{currentContact:{name:"",tel:""},showpopup:!1,show:!1,showList:!1,cartInfo:[],checked:!1,userInfo:[],storePostage:0,message:"",price_z:0,orderKey:"",cell:1,vipPrice:0,addressInfo:{},addressInfoa:[],popuplist:[]}},props:["sid"],methods:{popup:function(){var t=this;console.log(123),this.$axios.get("/api/address/list").then((function(e){console.log(e),t.popuplist=e.data.data}))},checkbox:function(){var t=this;this.checked?(console.log(this.userInfo.integral),this.$axios.post("/api/order/computed/"+this.orderKey,{addressId:this.addressInfo.id,couponId:0,payType:"yue",shipping_type:1,useIntegral:1}).then((function(e){var o=e.data.data.result;console.log(o),t.userInfo.integral=t.userInfo.integral-+o.deduction_price,t.price_z=+o.pay_price}))):(console.log(this.userInfo.integral),this.$axios.post("/api/order/computed/"+this.orderKey,{addressId:this.addressInfo.id,couponId:0,payType:"yue",shipping_type:1,useIntegral:0}).then((function(e){var o=e.data.data.result;console.log(o),t.userInfo.integral=t.userInfo.integral+ +o.pay_price,t.price_z=100*o.pay_price})))},cell1:function(){this.cell=1},cell2:function(){this.cell=2},disabled:function(){this.$toast("暂无门店")},onEdit:function(){this.show=!0},onSubmit:function(){var t=this;this.showpopup=!0,this.$axios.post("/api/order/create/"+this.orderKey,{addressId:this.addressInfo.id,bargainId:0,combinationId:0,couponId:0,from:"weixinh5",mark:"",payType:"yue",phone:"",pinkId:0,real_name:"",seckill_id:0,shipping_type:1,store_id:0,useIntegral:0}).then((function(e){t.showpopup=!1,console.log(e),t.$router.push("/orderform/"+e.data.data.result.orderId)}))}},created:function(){var t=this;this.cell1(),this.$axios.post("/api/order/confirm",{cartId:this.sid}).then((function(e){console.log(e);var o=e.data.data;t.addressInfoa=o.addressInfo,console.log(t.addressInfoa),t.currentContact.name=o.addressInfo.real_name,t.currentContact.tel=o.addressInfo.phone,t.addressInfo=o.addressInfo,t.orderKey=o.orderKey,t.userInfo=o.userInfo,t.cartInfo=o.cartInfo,t.storePostage=o.priceGroup.storePostage,t.vipPrice=o.priceGroup.vipPrice,t.price_z=100*+o.priceGroup.totalPrice}))}}),i=n,r=(o("3412"),o("2877")),c=Object(r["a"])(i,s,a,!1,null,null,null);e["default"]=c.exports},b0c0:function(t,e,o){var s=o("83ab"),a=o("9bf2").f,n=Function.prototype,i=n.toString,r=/^\s*function ([^ (]*)/,c="name";s&&!(c in n)&&a(n,c,{configurable:!0,get:function(){try{return i.call(this).match(r)[1]}catch(t){return""}}})},fb99:function(t,e,o){}}]);
//# sourceMappingURL=chunk-e7e9f91c.6a654b51.js.map